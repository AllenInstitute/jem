{
    "type": "object",
    "title":"JSON Electrophysiology Metadata (JEM) - IVSCC",
    "properties": {
        "formVersion": {
            "type":"string",
            "title":"Version",
            "readonly":true
        },
        "rigOperator": {
            "type": "string",
            "title": "Researcher",
            "enum":["brianle", "kristenh", "rustym", "ramr", "sarav", "balreetp", "kamiliamn", "jessicat", "danieller", "marshallv","bamboa", "kristab", "audreym"],
            "required":true
        },
        "rigNumber": {
            "type":"string",
            "title":"Rig #",
            "enum":["1", "2", "3", "4", "5", "6", "7", "8"],
            "required":true
        },
        "date":{
            "format":"date",
            "title":"Slice on Rig Date/Time",
            "required":true
        },
        "acsfProductionDate":{
            "format":"date",
            "title":"ACSF Date",
            "required":true
        },
        "internalFillDate":{
            "format":"date",
            "title":"Internal Fill Date",
            "enum":["2022-12-09", "2022-10-27", "2022-09-09", "2022-08-25", "2022-07-28", "2022-06-16", "2022-06-15", "2022-05-06", "2022-05-05", "2022-03-31", "2022-03-30", "2022-03-29", "2022-03-28", "2022-02-16", "2022-02-15", "2022-02-14", "2022-01-11", "2022-01-10"],
            "required":true
        },
        "misinformation":{
            "type": "string",
            "title":"Misinformation",
            "enum":["Yes", "No"],
            "default": ["No"],
            "required":false
        },
        "limsSpecName": {
            "type": "string",
            "title":"Slice ID",
            "required":true
        },
        "virus_enhancer": {
            "type": "string",
            "title": "Virus/Enhancer",
            "enum": ["None", "CN1389", "CN1390", "CN1399", "CN1457", "CN1633", "CN1663", "CN1818", "CN1839", "CN1889", "CN1954", "CN1955", "CN2237", "CN2292", "CN2355", "CN2357", "CN2360", "CN2365", "CN2374", "CN2379", "CN2421", "CN2451", "CN2569", "CN2609", "CN2610", "CN2631", "CN2674", "CN2689", "CN2787", "CN2909", "CN3038", "CN3044", "CN3055", "CN3119", "CN3445", "CN3583", "CN3584", "CN3738", "CN2858", "CN2446", "CN2447", "CN3596", "CN3563", "CN3311", "CN2723", "CN1870", "CN1366", "CN2693", "CN2368", "CN2602", "CN3556"],
            "required": true
        },
        "sliceNotes":{
            "type":"string",
            "format":"string",
            "title":"Extra Slice Notes",
            "required":false
        },
        "pipettes":{
            "type":"array",
            "items":{
                "title":"Patch-Seq Pipette",
                "type":"object",
                "properties":{
                    "approach": {
                        "type":"object",
                        "title": "Approach Info",
                        "properties": {
                            "cellHealth":{
                                "type": "string",
                                "title": "Cell Health (Based on Visual Observation until Break-In)",
                                "enum": ["1", "3", "5"],
                                "required": true
                            },
                            "creCell": {
                                "type":"string",
                                "title":"Reporter Status",
                                "enum":["Positive", "Negative", "NA"],
                                "required":true
                            },
                            "pilotName":{
                                "type":"string",
                                "title":"Slice/Cell Level Projects",
                                "default": "None",
                                "enum": ["None", "LAS Validation", "MOR Pilot", "retrograde_labeling", "ICV Injection", "Morphology Clearing", "Picrotoxin Validation", "1% Biocytin + Extended PBS Morphology Pilot", "1% Biocytin Pilot", "Extended PBS Morphology Pilot", "Training", "Neonatal mice", "Lot2022 Validation Pilot", "U01 Pilot", "Dravet Mouse Pilot"],
                                "required":true
                            },
                            "project_icv_injection_fluorescent_roi": {
                                "type": "string",
                                "title": "Fluorescent ROI",
                                "enum": ["Yes", "No"],
                                "dependencies": "pilotName",
                                "required": true
                            },
                            "project_retrograde_labeling_hemisphere": {
                                "type": "string",
                                "title": "Injection Site (Hemisphere)",
                                "enum": ["Bilateral", "Left", "Right"],
                                "dependencies": "pilotName",
                                "required": true
                            },
                            "project_retrograde_labeling_region": {
                                "type": "string",
                                "title": "Injection Site (Region)",
                                "enum": ["CP", "GPi","GPe", "SNr", "VAL", "VISal", "VISl", "VISp", "VISpm", "PL"],
                                "dependencies": "pilotName",
                                "required": true
                            },
                            "project_retrograde_labeling_exp": {
                                "type": "string",
                                "title": "Experiment Site",
                                "enum": ["Contralateral", "Ipsilateral"],
                                "dependencies": "pilotName",
                                "required": true
                            }
                        }
                    },
                    "experiment_in_bath": {
                        "type": "object",
                        "title": "Exp - In Bath",
                        "properties": {
                            "in_bath_resistance": {
                                "type": "string",
                                "format": "number",
                                "title": "Resistance",
                                "required": true,
                                "minimum": 2.0,
                                "maximum": 8.0
                            },
                            "in_bath_clog": {
                                "type": "string",
                                "format": "string",
                                "title": "Clog",
                                "required": true,
                                "enum": ["Yes", "No"]
                            },
                            "in_bath_time_start": {
                                "type": "string",
                                "format": "time",
                                "title": "Time - Cell Approach",
                                "required": true
                            }
                        }
                    },
                    "experiment_cell_attached": {
                        "type": "object",
                        "title": "Exp - Cell Attached",
                        "properties": {
                            "cell_attached_status": {
                                "type": "string",
                                "format": "string",
                                "title": "Cell Attached - Status",
                                "required": true,
                                "enum": ["Success", "Failure"]
                            },
                            "cell_attached_dimple": {
                                "type": "string",
                                "format": "string",
                                "title": "Dimple",
                                "required": true,
                                "enum": ["Yes", "No"],
                                "dependencies": "cell_attached_status"
                            },
                            "cell_attached_time_start": {
                                "type": "string",
                                "format": "time",
                                "title": "Time - Gigaohm Seal",
                                "required": true,
                                "dependencies": "cell_attached_status"
                            },
                            "cell_attached_status_failure": {
                                "type": "string",
                                "format": "string",
                                "title": "Cell Attached - Failure Options",
                                "required": true,
                                "enum": ["Death-cell membrane", "Hardware-error", "Seal-resistance (<1 gohm)", "Software-error"],
                                "dependencies": "cell_attached_status"
                            }
                        }
                    },
                    "experiment_break_in": {
                        "type": "object",
                        "title": "Exp - Break-In",
                        "properties": {
                            "break_in_status": {
                                "type": "string",
                                "format": "string",
                                "title": "Break-In - Status",
                                "required": true,
                                "enum": ["Success", "Failure"]
                            },
                            "break_in_time_start": {
                                "type": "string",
                                "format": "time",
                                "title": "Time - Start Break-In Method",
                                "required": true,
                                "dependencies": "break_in_status"
                            },
                            "break_in_pressure_max": {
                                "type": "string",
                                "format": "number",
                                "title": "Pressure - Max",
                                "required": true,
                                "minimum": 0,
                                "maximum": 500,
                                "dependencies": "break_in_status"
                            },
                            "break_in_zap_max": {
                                "type": "string",
                                "format": "string",
                                "title": "Zap - Max",
                                "required": true,
                                "enum": ["Not Applicable", "25us", "50us", "100us", "200us", "500us", "1ms", "2ms", "5ms", "10ms", "20ms", "50ms"],
                                "dependencies": "break_in_status"
                            },
                            "break_in_zap_use": {
                                "type": "string",
                                "format": "string",
                                "title": "Zap - Usage",
                                "required": true, 
                                "enum": ["Not Applicable", "Single", "Multiple"],
                                "dependencies": "break_in_status"
                            },
                            "break_in_time_end": {
                                "type": "string",
                                "format": "time",
                                "title": "Time - Cell Break-In",
                                "required": true,
                                "dependencies": "break_in_status"
                            },
                            "break_in_reseal": {
                                "type": "string",
                                "format": "string",
                                "title": "Reseal",
                                "required": true, 
                                "enum": ["Yes", "No"],
                                "dependencies": "break_in_status"
                            },
                            "break_in_status_failure": {
                                "type": "string",
                                "format": "string",
                                "title": "Break-In - Failure Options",
                                "required": true,
                                "enum": ["Death-cell membrane", "Hardware-error", "Seal-access resistance (>=20 mohm)", "Seal-unstable baseline", "Software-error", "Status-cell attached failure"],
                                "dependencies": "break_in_status"
                            }
                        }
                    },
                    "status":{
                        "type":"string",
                        "title":"Was recording successful?",
                        "enum":["SUCCESS", "FAILURE"],
                        "default":[],
                        "required":true
                    },
                    "pipetteSpecName": {
                        "type": "string",
                        "title":"Pipette Specimen ID",
                        "required":false
                    },
                    "freeFailureNotes":{
                        "type":"string",
                        "title":"Extra Failure Notes",
                        "default":[],
                        "dependencies":"status",
                        "required":false
                    },
                    "qcNotes":{
                        "type":"string",
                        "title":"QC Notes",
                        "dependencies":"status",
                        "required":false
                    },
                    "extraction":{
                        "type":"object",
                        "title":"Extraction Info",
                        "dependencies":"status",
                        "properties":{
                            "pilotNameExtra": {
                                "type":"string",
                                "readonly":true
                            },
                            "blankFillDate":{
                                "format":"date",
                                "title":"Blank Fill Date",
                                "enum":["2022-12-06", "2022-11-08", "2022-10-03", "2022-08-22", "2022-07-27", "2022-07-05", "2022-06-06", "2022-05-09", "2022-04-11", "2022-03-08", "2022-02-14", "2022-01-12"],
                                "default": ["2022-12-06"],
                                "required":false
                            },
                            "tubeID":{
                                "type":"string",
                                "title":"Patched Cell Container",
                                "required":true
                            },
                            "postPatch":{
                                "type":"string",
                                "title":"Post Patch State",
                                "enum":["nucleus_present", "nucleus_absent", "entire_cell", "unknown"],
                                "default":[],
                                "required":true
                            },
                            "nucleus": {
                                "type":"string",
                                "title":"Nucleus sucked in?",
                                "enum":["intentionally-surface", "not_intentionally-soma", "not_intentionally-retraction", "not_intentionally-surface", "no", "NA"],
                                "default":[],
                                "required": true
                            },
                            "endPipetteR":{
                                "format":"number",
                                "minimum": 0.0,
                                "maximum": 10000.0,
                                "title":"Post Patch Pipette R (MOhm)",
                                "required":true
                            },
                            "fillquality": {
                                "type":"string",
                                "title":"Biocytin fill quality",
                                "enum":["0: No fill or plume", "1: low visibility of the fill (heavily truncated or fill leaking)", "2: medium visibility of the fill (some truncations with some intact dendrites)", "3: high visibility of the fill (no or very little truncations with intact dendrites)"],
                                "default":[],
                                "required":true
                            },
                            "pressureApplied":{
                                "type":"number",
                                "title":"Extraction Pressure (mbar)",
                                "required":true,
                                "minimum": 0.0,
                                "maximum": 500.0
                            },
                            "timeExtractionStart":{
                                "format":"time",
                                "title":"Extraction Start Time",
                                "required":true
                            },
                            "timeExtractionEnd":{
                                "format":"time",
                                "title":"Extraction End Time",
                                "required":true
                            },
                            "retractionPressureApplied":{
                                "type":"number",
                                "title":"Retraction Pressure (mbar)",
                                "required":true,
                                "minimum": 0.0,
                                "maximum": 500.0
                            },
                            "timeRetractionEnd":{
                                "format":"time",
                                "title":"Retraction End Time",
                                "required":true
                            },
                            "project_level_nucleus":{
                                "type":"string",
                                "title":"Nucleus Level Projects",
                                "enum": ["None", "Channel_Recording", "Nucleus Absent"],
                                "required":true
                            },
                            "timeChannelRecordingEnd":{
                                "format":"time",
                                "title":"Channel Recording - Time End",
                                "required":true,
                                "dependencies":"project_level_nucleus"
                            },
                            "extractionNotes": {
                                "type": "string",
                                "title": "Extra Extraction Notes"
                            }
                        }
                    },
                    "depth": {
                        "format":"number",
                        "minimum": 0.0,
                        "maximum": 200.0,
                        "title":"Cell Depth",
                        "required":true
                    },
                    "autoRoi":{
                        "type":"string",
                        "title": "ROI (Pinning Tool)",
                        "required":false,
                        "default":"None"
                    },
                    "manualRoi":{
                        "type":"string",
                        "title": "ROI",
                        "required":true
                    }
                }
            }
        }
    }
}